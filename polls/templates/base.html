<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        {% load compressed %}
        <script type="text/javascript" src="{{STATIC_URL}}bootstrap/js/jquery-1.7.1.js"></script>
        <script type="text/javascript" src="{{STATIC_URL}}bootstrap/js/bootstrap.js"></script>
        <script type="text/javascript" src="{{STATIC_URL}}bootstrap/js/bootstrap-dropdown.js"></script>
        <script type="text/javascript" src="{{STATIC_URL}}graphing/raphael-min.js"></script>
        <script type="text/javascript" src="{{STATIC_URL}}graphing/fancygraphs.js"></script>
        {% compressed_css 'custombootstrap' %}
        <script type="text/javascript">
            eventHandlers = {
                'focus': function(){
                    //Find the first number in the choice,
                    var index = this.id.match(/\d+/);
                    if ($(this).val() == "Choice " + index) {
                        $(this).val('');
                    }
                },

                'blur': function(){
                    //Find the first number in the choice,
                    var index = this.id.match(/\d+/);
                    if ($(this).val() == "") {
                        $(this).val('Choice ' + index);
                    }
                }
            };

            optionCount = 3;
            function addPollOption() {
                options = document.getElementById("options");

                // Input
                input = document.createElement("input");
                options.appendChild(input);
                options.appendChild(document.createElement("br"));

                input.type = "text";
                input.name = "choice" + optionCount;
                input.id = "choice" + optionCount + "input";
                $(input).val("Choice " + optionCount);

                optionCount++;
                $(input).bind(eventHandlers);
            }

            $(document).ready(function(){
                inputs = $("#options input:text");
                inputs.bind(eventHandlers);
                inputs.val(function (index) {
                    return "Choice " + (index + 1);
                });

                var addChoiceButton = document.createElement('input');
                addChoiceButton.type = "button";
                $(addChoiceButton).addClass("btn-small btn");
                addChoiceButton.onclick = addPollOption;
                addChoiceButton.value = "Add Another Choice";

                var container = document.getElementById("addOptionContainer");
                container.appendChild(addChoiceButton);

                $("#questioninput").val("Enter Your Question Here");

            });
        </script>
        <title>{% block title %}gimme a poll{% endblock %}</title>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="span8">
                    <img src="../static/logo.png" alt="Our logo"/>
                    <img src="../static/title.png" alt="GimmeaPoll"/>
                </div>
                <div class="span3 offset1">
                    <br><br><br>
                    <form action="{% url search %}" id="searchForm" method="get">
                        <input type="text" name="q" class="search-query span2" placeholder="Search Polls" id="searchinput">
                    </form>
                </div>
            </div>
            <br>
        </div> <!--close container -->

    <div id ="content">
        <noscript>
            <div class="alert alert-error">
                It looks like you don't have javascript enabled! Graphs are going to be a bit uglier, but everything else
                should work.
            </div>
        </noscript>
        {% block content %}{% endblock %}
    </div>

    <footer>
        <div class="container">
            <br><br>
            <div class="row">
                <div class="span4">
                    <h5>What Is This? And Why Am I Here?</h5> <br>
                    <p> Wonder what people are thinking? Making a poll is quick and easy: No fee, No registration. Go for it! </p>
                </div> <!-- close span4 -->
                <div class="span4">
                    <h5>Awesome! Can I Help?</h5> <br>
                    <p> Sure! Check us out at: <a href="http://www.github.com/sbadame/polling">github.com</a></p>
                </div> <!-- close span4 -->
                <div class="span4">
                    <h5>Some Other Cool Stuff</h5> <br>
                    <ul>
                        <li><a href="http://www.google.com">google.com</a></li>
                        <li><a href="http://www.django.com">django.com</a></li>
                        <li><a href="http://www.python.org">python.org</a></li>
                        <li><a href="http://www.xkcd.com">xkcd.com</a></li>
                    </ul>
                </div> <!-- close span4 -->
            </div> <!-- close row -->
        </div> <!-- close container -->
    </footer>
    </body>
    {% block scripts %}{% endblock %}
</html>
