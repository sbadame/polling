{% extends "base.html" %}
{% block content %}
{% if poll.has_expired %}
    <div class="alert alert-error">
        Poll has expired!
    </div>
{% endif %}
<h1>{{ poll.question }}</h1>

<div id="graph"></div>
<div id="canvas_container"></div>

{% endblock %}

{% block scripts %}
    <style type="text/css">
        #canvas_container {
            width: 300px;
            height: 200px;
        }
    </style>
    <script type="text/javascript" src="{{STATIC_URL}}graphing/raphael-min.js"></script>
    <script type="text/javascript" src="{{STATIC_URL}}graphing/fancygraphs.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            var data = [{% spaceless %}
                {% for choice, votes in poll.results %}['{{choice}}', {{votes}}]{% if not forloop.last %},{% endif %}{% endfor %}];
            {% endspaceless %}
            graph($('#canvas_container').get(0), data, {});
        });
    </script>
{% endblock %}
